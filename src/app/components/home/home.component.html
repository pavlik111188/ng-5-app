<mat-tab-group class="demo-tab-group" (selectedTabChange)="tabSelected($event)">
  <mat-tab label="Поступившие">
    <div class="mat-toolbar-row-new">
      <mat-toolbar-row>
        <mat-form-field>
          <mat-select placeholder="Выбор отдела">
            <mat-option>На все номера</mat-option>
            <mat-option *ngFor="let depart of departs; let i = index" [value]="depart">{{depart}}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-fab class="show-stat-btn" (click)="getStat()">
          <mat-icon aria-label="Show statistic">sort</mat-icon>
        </button>        
      </mat-toolbar-row>
      <mat-toolbar-row>
        <mat-form-field class="form-datepicker">
          <input matInput [matDatepicker]="picker1" placeholder="С" [formControl]="date">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <input matInput [matDatepicker]="picker2" placeholder="По"
                 [formControl]="serializedDate">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
      </mat-toolbar-row>
      <div class="stat-block" *ngIf="showStat">
        Всех звонков за выбранный период: <b>{{ countAll }}</b>  из них уникальных: <b>{{ countUniqueNumbers }}</b> <br />
        Звонили впервые: <b>{{ isNewCall }}</b>  ({{ isNewCallPercent }}%) <br />
        Принятых звонков: <b>{{ outgoingSuccessCount }}</b>  ({{ outgoingSuccessCountPerc }}%) <br />
        Непринятых звонков: <b>{{ outgoingUnSuccessCount }}</b>  ({{ outgoingUnSuccessCountPerc }}%)  из них звонили впервые: <b>{{ countAllNewUnsuccessCalls }}</b> <br />
        Длительность всех разговоров: <b>{{ secondsToTime(durationAllCalls) }}</b> <br />
        Среднее время разговора: <b>{{ secondsToTime(averageAllCalls) }}</b> <br />
        Среднее время ожидания всех звонков: <b>{{ secondsToTime(averageAllWaitCalls) }}</b>, 
        принятых звонков: <b>{{ secondsToTime(averageSuccessWaitCalls) }}</b>, 
        непринятых звонков: <b>{{ secondsToTime(averageUnSuccessWaitCalls) }}</b> <br />
        <!-- 044<span class="space-before">333</span><span class="space-before">44</span><span class="space-before">44</span> -->
      </div>
    </div>
    <div class="demo-tab-content">
      <mat-accordion>
        <mat-expansion-panel *ngFor="let newCall of dataAllCalls | slice:0:[max]">          
          <mat-expansion-panel-header>
            <span *ngIf="newCall.isNewCall === '1'" class="is-new-call"></span>
            <span *ngIf="successDesp.indexOf(newCall.disposition) == '-1'" class="unsuccess"></span>
            <span *ngIf="successDesp.indexOf(newCall.disposition) != '-1'" class="success"></span>
            <mat-panel-title [innerHTML]="prepareTelephoneNumberWithSpan(newCall.externalNumber)">

            </mat-panel-title>
            <mat-panel-description>
              {{ newCall.customerData.name }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>Кому звонили: <b>{{ newCall.employeeData.name }}</b></p>
          <p>Ожидание: <b>{{ newCall.waitsec != '0' ? secondsToTime(newCall.waitsec) : '' }}</b></p>
          <p>Длительность разговора: <b>{{ newCall.billsec != '0' ? secondsToTime(newCall.billsec) : '' }}</b></p>
          <p>Время и дата: <b>{{ convertTimestamp(newCall.startTime,'time') }} &nbsp;&nbsp;&nbsp;&nbsp; {{ convertTimestamp(newCall.startTime,'full') }}</b></p>
          <p class="btn-area">
            <span>
              <button mat-icon-button [ngClass]="{'nav-active': newCall.isNewCall === '1' }">
                <mat-icon aria-label="Comment">mode_comment</mat-icon>
              </button>
              <button mat-icon-button *ngIf="successDesp.indexOf(newCall.disposition) != '-1'">
                <mat-icon aria-label="Record">volume_up</mat-icon>
              </button>
            </span>
          </p>
        </mat-expansion-panel>
      </mat-accordion>
      <div class="button-row">
        <button mat-raised-button color="primary" (click)="toggle()">Показать еще 150 звонков</button>
      </div>
    </div>
  </mat-tab>
  <mat-tab label="Совершенные">
    <div>
      <mat-toolbar-row>
        <mat-form-field>
          <mat-select placeholder="Выбор отдела">
            <mat-option>На все номера</mat-option>
            <mat-option *ngFor="let depart of departs; let i = index" [value]="depart">{{depart}}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-fab class="show-stat-btn" (click)="getStat()">
          <mat-icon aria-label="Show statistic">sort</mat-icon>
        </button>
      </mat-toolbar-row>
      <div class="stat-block" *ngIf="showStat">
        Всех звонков за выбранный период: <b>{{ countAll }}</b>  из них уникальных: <b>{{ countUniqueNumbers }}</b> <br />
        Успешно совершенных звонков: <b>{{ outgoingSuccessCount }}</b> <br />
        Не удалось дозвониться, вызовов: <b>{{ outgoingUnSuccessCount }}</b> <br />
        Длительность всех разговоров: 58:13:49 <br />
        Среднее время разговора: 03:54 <br />
        Длительность времени ожидания при исходящем звонке: 01:14:47 <br />
      </div>
    </div>
    <div class="demo-tab-content">
      <mat-accordion>
        <mat-expansion-panel *ngFor="let newCall of dataAllCalls | slice:0:[max]">
          <mat-expansion-panel-header [ngClass]="{'is-new-call': newCall.isNewCall === '1' }">
            <mat-panel-title>
              {{ newCall.employeeData.name }}
            </mat-panel-title>
            <mat-panel-description>
              {{ newCall.internalNumber }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>Кому звонили: <b>{{ newCall.customerData.name }}</b></p>
          <p>{{ newCall.externalNumber }}</p>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </mat-tab>
  <mat-tab label="Потерянные ({{ countLostCalls }})">
    <div class="demo-tab-content">
      <div>
        <mat-toolbar-row>
          <mat-form-field>
            <mat-select placeholder="Выбор отдела">
              <mat-option>На все номера</mat-option>
              <mat-option *ngFor="let depart of departs; let i = index" [value]="depart">{{depart}}</mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-fab class="show-stat-btn" (click)="getStat()">
            <mat-icon aria-label="Show statistic">sort</mat-icon>
          </button>
        </mat-toolbar-row>
        <div class="stat-block" *ngIf="showStat">
          Всех звонков за выбранный период: <b>{{ countAll }}</b>  из них уникальных: <b>{{ countUniqueNumbers }}</b> <br />
          Успешно совершенных звонков: <b>{{ outgoingSuccessCount }}</b> <br />
          Не удалось дозвониться, вызовов: <b>{{ outgoingUnSuccessCount }}</b> <br />
          Длительность всех разговоров: 58:13:49 <br />
          Среднее время разговора: 03:54 <br />
          Длительность времени ожидания при исходящем звонке: 01:14:47 <br />
        </div>
      </div>
      <div class="demo-tab-content">
        <mat-accordion>
          <mat-expansion-panel *ngFor="let newCall of dataAllCalls | slice:0:[max]">
            <mat-expansion-panel-header [ngClass]="{'is-new-call': newCall.isNewCall === '1' }">
              <mat-panel-title>
                {{ newCall.employeeData.name }}
              </mat-panel-title>
              <mat-panel-description>
                {{ newCall.internalNumber }}
              </mat-panel-description>
            </mat-expansion-panel-header>
            <p>Кому звонили: <b>{{ newCall.customerData.name }}</b></p>
            <p>{{ newCall.externalNumber }}</p>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </div>
  </mat-tab>
  <mat-tab label="По сотрудникам">
    <div class="demo-tab-content">
      По сотрудникам
    </div>
  </mat-tab>
  <mat-tab label="По номеру">
    <div class="demo-tab-content">
      По номеру
    </div>
  </mat-tab>
  <mat-tab label="Прямо сейчас">
    <div class="demo-tab-content">
      Прямо сейчас
    </div>
  </mat-tab>
  <mat-tab label="Мониторинг очередей">
    <div class="demo-tab-content">
      Мониторинг очередей
    </div>
  </mat-tab>
</mat-tab-group>